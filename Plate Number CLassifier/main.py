from fastapi import FastAPI
from pydantic import BaseModel
import joblib
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.preprocessing import LabelEncoder

app = FastAPI()

# Load the saved model and associated vocabulary during startup
loaded_nb_classifier = joblib.load('nb_model_2/plateNum_classifier_NBM_v2.joblib')
loaded_vectorizer = joblib.load('nb_model_2/vectorizer2.joblib')  # Load the CountVectorizer
loaded_label_encoder = joblib.load('nb_model_2/label_encoder2.joblib')  # Load the LabelEncoder

# Load the dataset into a dictionary where keys are lgacodes and values are states
# You can load your dataset from a CSV file or any other appropriate source
# Here, I'm assuming you have it in a Python dictionary format for simplicity.
# Replace this with your actual dataset.
lgacode_to_state = {
    'EZA': 'ABIA',
    'ABA': 'ABIA',
    'ACH': 'ABIA',
    'BND': 'ABIA',
    'KWU': 'ABIA',
    'KPU': 'ABIA',
    'MBA': 'ABIA',
    'MBL': 'ABIA',
    'NGK': 'ABIA',
    'HAF': 'ABIA',
    'SSM': 'ABIA',
    'GWB': 'ABIA',
    'KKE': 'ABIA',
    'KEK': 'ABIA',
    'UMA': 'ABIA',
    'APR': 'ABIA',
    'UNC': 'ABIA',
    'DSA': 'ADAMAWA',
    'FUR': 'ADAMAWA',
    'GAN': 'ADAMAWA',
    'GRE': 'ADAMAWA',
    'GMB': 'ADAMAWA',
    'GUY': 'ADAMAWA',
    'HNG': 'ADAMAWA',
    'JAD': 'ADAMAWA',
    'JMT': 'ADAMAWA',
    'LMR': 'ADAMAWA',
    'MDG': 'ADAMAWA',
    'MAH': 'ADAMAWA',
    'MWA': 'ADAMAWA',
    'MCH': 'ADAMAWA',
    'MUB': 'ADAMAWA',
    'GYL': 'ADAMAWA',
    'NUM': 'ADAMAWA',
    'SHG': 'ADAMAWA',
    'SNG': 'ADAMAWA',
    'TNG': 'ADAMAWA',
    'YLA': 'ADAMAWA',
    'ABK': 'AKWA-IBOM',
    'KRT': 'AKWA-IBOM',
    'KET': 'AKWA-IBOM',
    'KST': 'AKWA-IBOM',
    'AFH': 'AKWA-IBOM',
    'AEE': 'AKWA-IBOM',
    'ETN': 'AKWA-IBOM',
    'PNG': 'AKWA-IBOM',
    'NGD': 'AKWA-IBOM',
    'BMT': 'AKWA-IBOM',
    'NYA': 'AKWA-IBOM',
    'KKN': 'AKWA-IBOM',
    'KTS': 'AKWA-IBOM',
    'KTE': 'AKWA-IBOM',
    'DRK': 'AKWA-IBOM',
    'TTU': 'AKWA-IBOM',
    'ENW': 'AKWA-IBOM',
    'MKP': 'AKWA-IBOM',
    'AFG': 'AKWA-IBOM',
    'KTD': 'AKWA-IBOM',
    'TAI': 'AKWA-IBOM',
    'NTE': 'AKWA-IBOM',
    'KPD': 'AKWA-IBOM',
    'ABT': 'AKWA-IBOM',
    'RNN': 'AKWA-IBOM',
    'KTM': 'AKWA-IBOM',
    'EYF': 'AKWA-IBOM',
    'KPK': 'AKWA-IBOM',
    'UFG': 'AKWA-IBOM',
    'DUU': 'AKWA-IBOM',
    'UYY': 'AKWA-IBOM',
    'AGU': 'ANAMBRA',
    'AAH': 'ANAMBRA',
    'NZM': 'ANAMBRA',
    'NEN': 'ANAMBRA',
    'ACA': 'ANAMBRA',
    'AWK': 'ANAMBRA',
    'NKK': 'ANAMBRA',
    'KPP': 'ANAMBRA',
    'ZBL': 'ANAMBRA',
    'GDD': 'ANAMBRA',
    'JJT': 'ANAMBRA',
    'HAL': 'ANAMBRA',
    'ABN': 'ANAMBRA',
    'NNE': 'ANAMBRA',
    'UKP': 'ANAMBRA',
    'ATN': 'ANAMBRA',
    'NSH': 'ANAMBRA',
    'FGG': 'ANAMBRA',
    'AJL': 'ANAMBRA',
    'UMZ': 'ANAMBRA',
    'HTE': 'ANAMBRA',
    'ALK': 'BAUCHI',
    'BAU': 'BAUCHI',
    'BGR': 'BAUCHI',
    'DBM': 'BAUCHI',
    'DRZ': 'BAUCHI',
    'DAS': 'BAUCHI',
    'GAM': 'BAUCHI',
    'GJW': 'BAUCHI',
    'GYD': 'BAUCHI',
    'TSG': 'BAUCHI',
    'JMA': 'BAUCHI',
    'KTG': 'BAUCHI',
    'KRF': 'BAUCHI',
    'MSA': 'BAUCHI',
    'NNG': 'BAUCHI',
    'SHR': 'BAUCHI',
    'TFB': 'BAUCHI',
    'TRR': 'BAUCHI',
    'WRJ': 'BAUCHI',
    'ZAK': 'BAUCHI',
    'BRS': 'BAYELSA',
    'KMR': 'BAYELSA',
    'KMK': 'BAYELSA',
    'NEM': 'BAYELSA',
    'GBB': 'BAYELSA',
    'SAG': 'BAYELSA',
    'SPR': 'BAYELSA',
    'YEN': 'BAYELSA',
    'GMU': 'BENUE',
    'GTU': 'BENUE',
    'GKP': 'BENUE',
    'BKB': 'BENUE',
    'GBK': 'BENUE',
    'YGJ': 'BENUE',
    'ALD': 'BENUE',
    'NAK': 'BENUE',
    'KAL': 'BENUE',
    'TSE': 'BENUE',
    'WDP': 'BENUE',
    'GBG': 'BENUE',
    'MKD': 'BENUE',
    'BRT': 'BENUE',
    'BGT': 'BENUE',
    'DKP': 'BENUE',
    'JUX': 'BENUE',
    'PKG': 'BENUE',
    'TKP': 'BENUE',
    'WNN': 'BENUE',
    'UKM': 'BENUE',
    'SEL': 'BENUE',
    'VDY': 'BENUE',
    'ADM': 'BORNO',
    'ASU': 'BORNO',
    'BAM': 'BORNO',
    'BAY': 'BORNO',
    'BBU': 'BORNO',
    'CBK': 'BORNO',
    'DAM': 'BORNO',
    'DKW': 'BORNO',
    'GUB': 'BORNO',
    'GZM': 'BORNO',
    'GZA': 'BORNO',
    'HWL': 'BORNO',
    'JRE': 'BORNO',
    'KGG': 'BORNO',
    'KBG': 'BORNO',
    'KDG': 'BORNO',
    'KWA': 'BORNO',
    'KWY': 'BORNO',
    'MAF': 'BORNO',
    'MGM': 'BORNO',
    'MAG': 'BORNO',
    'MAR': 'BORNO',
    'MBR': 'BORNO',
    'MNG': 'BORNO',
    'NGL': 'BORNO',
    'NGZ': 'BORNO',
    'SHN': 'BORNO',
    'TGD': 'CROSS RIVER',
    'RAM': 'CROSS RIVER',
    'KTA': 'CROSS RIVER',
    'BKS': 'CROSS RIVER',
    'ABE': 'CROSS RIVER',
    'AKP': 'CROSS RIVER',
    'BJE': 'CROSS RIVER',
    'CAL': 'CROSS RIVER',
    'ANA': 'CROSS RIVER',
    'EFE': 'CROSS RIVER',
    'KMM': 'CROSS RIVER',
    'BNS': 'CROSS RIVER',
    'BRA': 'CROSS RIVER',
    'UDU': 'CROSS RIVER',
    'DUK': 'CROSS RIVER',
    'GGJ': 'CROSS RIVER',
    'GEP': 'CROSS RIVER',
    'CKK': 'CROSS RIVER',
    'SLK': 'DELTA',
    'GWK': 'DELTA',
    'BMA': 'DELTA',
    'BUR': 'DELTA',
    'SKL': 'DELTA',
    'GRA': 'DELTA',
    'AGB': 'DELTA',
    'AYB': 'DELTA',
    'DSZ': 'DELTA',
    'LEH': 'DELTA',
    'ABH': 'DELTA',
    'KWC': 'DELTA',
    'KPE': 'DELTA',
    'AKU': 'DELTA',
    'ASB': 'DELTA',
    'PTN': 'DELTA',
    'SAP': 'DELTA',
    'ALA': 'DELTA',
    'UGH': 'DELTA',
    'JRT': 'DELTA',
    'BKW': 'DELTA',
    'EFR': 'DELTA',
    'GBJ': 'DELTA',
    'KLK': 'DELTA',
    'WWR': 'DELTA',
    'AKL': 'EBONYI',
    'AFK': 'EBONYI',
    'EDA': 'EBONYI',
    'UGB': 'EBONYI',
    'EBJ': 'EBONYI',
    'NKE': 'EBONYI',
    'CHR': 'EBONYI',
    'ZLL': 'EBONYI',
    'SKA': 'EBONYI',
    'BKL': 'EBONYI',
    'HKW': 'EBONYI',
    'BZR': 'EBONYI',
    'NCA': 'EBONYI',
    'GAR': 'EDO',
    'USL': 'EDO',
    'RRU': 'EDO',
    'URM': 'EDO',
    'UBJ': 'EDO',
    'EKP': 'EDO',
    'FUG': 'EDO',
    'AGD': 'EDO',
    'AUC': 'EDO',
    'GUE': 'EDO',
    'DGE': 'EDO',
    'BEN': 'EDO',
    'ABD': 'EDO',
    'AKA': 'EDO',
    'GBZ': 'EDO',
    'AFZ': 'EDO',
    'SGD': 'EDO',
    'HER': 'EDO',
    'ADK': 'EKITI',
    'EFY': 'EKITI',
    'MUE': 'EKITI',
    'LAW': 'EKITI',
    'AMK': 'EKITI',
    'EMR': 'EKITI',
    'SSE': 'EKITI',
    'DEA': 'EKITI',
    'DEK': 'EKITI',
    'JER': 'EKITI',
    'KER': 'EKITI',
    'RLE': 'EKITI',
    'YEK': 'EKITI',
    'GED': 'EKITI',
    'TUN': 'EKITI',
    'YEE': 'EKITI',
    'DBR': 'ENUGU',
    'AWG': 'ENUGU',
    'NKW': 'ENUGU',
    'ENU': 'ENUGU',
    'UWN': 'ENUGU',
    'AGW': 'ENUGU',
    'GBD': 'ENUGU',
    'ENZ': 'ENUGU',
    'BBG': 'ENUGU',
    'KEM': 'ENUGU',
    'MGL': 'ENUGU',
    'AGN': 'ENUGU',
    'NSK': 'ENUGU',
    'JRV': 'ENUGU',
    'BLF': 'ENUGU',
    'UDD': 'ENUGU',
    'UMU': 'ENUGU',
    'ABJ': 'FCT',
    'ABC': 'FCT',
    'RSH': 'FCT',
    'RBC': 'FCT',
    'BWR': 'FCT',
    'GWA': 'FCT',
    'KUJ': 'FCT',
    'KWL': 'FCT',
    'YAB': 'FCT',
    'AKK': 'GOMBE',
    'BLG': 'GOMBE',
    'BLR': 'GOMBE',
    'DKU': 'GOMBE',
    'FKY': 'GOMBE',
    'GME': 'GOMBE',
    'KLT': 'GOMBE',
    'KWM': 'GOMBE',
    'NFD': 'GOMBE',
    'SHM': 'GOMBE',
    'YDB': 'GOMBE',
    'ABB': 'IMO',
    'AFR': 'IMO',
    'EHM': 'IMO',
    'ETU': 'IMO',
    'URU': 'IMO',
    'DFB': 'IMO',
    'EKE': 'IMO',
    'KED': 'IMO',
    'UML': 'IMO',
    'UMD': 'IMO',
    'NWA': 'IMO',
    'NGN': 'IMO',
    'UMK': 'IMO',
    'NKR': 'IMO',
    'AMG': 'IMO',
    'TTK': 'IMO',
    'GUA': 'IMO',
    'EBM': 'IMO',
    'KGE': 'IMO',
    'KWE': 'IMO',
    'RLU': 'IMO',
    'AWT': 'IMO',
    'MMA': 'IMO',
    'NGB': 'IMO',
    'WER': 'IMO',
    'RRT': 'IMO',
    'UMG': 'IMO',
    'AUY': 'JIGAWA',
    'BBR': 'JIGAWA',
    'BNW': 'JIGAWA',
    'BKD': 'JIGAWA',
    'BUJ': 'JIGAWA',
    'dut': 'JIGAWA',
    'GGW': 'JIGAWA',
    'GRK': 'JIGAWA',
    'GML': 'JIGAWA',
    'GRR': 'JIGAWA',
    'GRM': 'JIGAWA',
    'GWW': 'JIGAWA',
    'HJA': 'JIGAWA',
    'JHN': 'JIGAWA',
    'KHS': 'JIGAWA',
    'KGM': 'JIGAWA',
    'KZR': 'JIGAWA',
    'KKM': 'JIGAWA',
    'MGR': 'JIGAWA',
    'MMR': 'JIGAWA',
    'MGA': 'JIGAWA',
    'RNG': 'JIGAWA',
    'RRN': 'JIGAWA',
    'STK': 'JIGAWA',
    'TAR': 'JIGAWA',
    'YKS': 'JIGAWA',
    'KYW': 'JIGAWA',
    'BNG': 'KADUNA',
    'KJM': 'KADUNA',
    'GKW': 'KADUNA',
    'TRK': 'KADUNA',
    'KAR': 'KADUNA',
    'KWB': 'KADUNA',
    'KAF': 'KADUNA',
    'KCH': 'KADUNA',
    'DKA': 'KADUNA',
    'KGK': 'KADUNA',
    'KJR': 'KADUNA',
    'KRA': 'KADUNA',
    'MKA': 'KADUNA',
    'KRU': 'KADUNA',
    'ANC': 'KADUNA',
    'HKY': 'KADUNA',
    'SNK': 'KADUNA',
    'MKR': 'KADUNA',
    'SBG': 'KADUNA',
    'GWT': 'KADUNA',
    'MGN': 'KADUNA',
    'ZKW': 'KADUNA',
    'ZAR': 'KADUNA',
    'AJG': 'KANO',
    'ABS': 'KANO',
    'BGW': 'KANO',
    'BBJ': 'KANO',
    'BCH': 'KANO',
    'BNK': 'KANO',
    'DAL': 'KANO',
    'DBT': 'KANO',
    'DKD': 'KANO',
    'DTF': 'KANO',
    'DGW': 'KANO',
    'FGE': 'KANO',
    'DSW': 'KANO',
    'GAK': 'KANO',
    'GNM': 'KANO',
    'GYA': 'KANO',
    'GZW': 'KANO',
    'GWL': 'KANO',
    'GRZ': 'KANO',
    'KMC': 'KANO',
    'KRY': 'KANO',
    'KBY': 'KANO',
    'KKU': 'KANO',
    'KBT': 'KANO',
    'KNC': 'KANO',
    'KUR': 'KANO',
    'MDB': 'KANO',
    'MKK': 'KANO',
    'MJB': 'KANO',
    'NSR': 'KANO',
    'RAN': 'KANO',
    'RMG': 'KANO',
    'RGG': 'KANO',
    'SNN': 'KANO',
    'SML': 'KANO',
    'TAK': 'KANO',
    'TRN': 'KANO',
    'TEA': 'KANO',
    'TYW': 'KANO',
    'TWD': 'KANO',
    'UGG': 'KANO',
    'WRA': 'KANO',
    'WDL': 'KANO',
    'KBK': 'KANO',
    'BKR': 'KATSINA',
    'BAT': 'KATSINA',
    'BTR': 'KATSINA',
    'BRE': 'KATSINA',
    'BDW': 'KATSINA',
    'CRC': 'KATSINA',
    'DMS': 'KATSINA',
    'DDM': 'KATSINA',
    'DJA': 'KATSINA',
    'DRA': 'KATSINA',
    'DTS': 'KATSINA',
    'DTM': 'KATSINA',
    'FSK': 'KATSINA',
    'FTA': 'KATSINA',
    'NGW': 'KATSINA',
    'JBY': 'KATSINA',
    'KFR': 'KATSINA',
    'KAT': 'KATSINA',
    'KKR': 'KATSINA',
    'KNK': 'KATSINA',
    'KTN': 'KATSINA',
    'KUF': 'KATSINA',
    'KSD': 'KATSINA',
    'MDW': 'KATSINA',
    'MNF': 'KATSINA',
    'MAN': 'KATSINA',
    'MSH': 'KATSINA',
    'MTZ': 'KATSINA',
    'MSW': 'KATSINA',
    'RMY': 'KATSINA',
    'SBA': 'KATSINA',
    'SFN': 'KATSINA',
    'SDM': 'KATSINA',
    'ZNG': 'KATSINA',
    'ALR': 'KEBBI',
    'KGW': 'KEBBI',
    'ARG': 'KEBBI',
    'AUG': 'KEBBI',
    'BGD': 'KEBBI',
    'BRK': 'KEBBI',
    'BNZ': 'KEBBI',
    'KMB': 'KEBBI',
    'MHT': 'KEBBI',
    'GWN': 'KEBBI',
    'JEG': 'KEBBI',
    'KLG': 'KEBBI',
    'BES': 'KEBBI',
    'MYM': 'KEBBI',
    'WRR': 'KEBBI',
    'DRD': 'KEBBI',
    'SNA': 'KEBBI',
    'DKG': 'KEBBI',
    'RBH': 'KEBBI',
    'YLW': 'KEBBI',
    'ZUR': 'KEBBI',
    'DAV': 'KOGI',
    'AJA': 'KOGI',
    'KPA': 'KOGI',
    'BAS': 'KOGI',
    'KNA': 'KOGI',
    'NDG': 'KOGI',
    'DAH': 'KOGI',
    'AJK': 'KOGI',
    'JMU': 'KOGI',
    'KAB': 'KOGI',
    'KKF': 'KOGI',
    'LKJ': 'KOGI',
    'MPA': 'KOGI',
    'KFU': 'KOGI',
    'KPF': 'KOGI',
    'KKH': 'KOGI',
    'KNE': 'KOGI',
    'LAM': 'KOGI',
    'BJK': 'KOGI',
    'ERE': 'KOGI',
    'SAN': 'KOGI',
    'AFN': 'KWARA',
    'KSB': 'KWARA',
    'LAF': 'KWARA',
    'ARP': 'KWARA',
    'SHA': 'KWARA',
    'KEY': 'KWARA',
    'FUF': 'KWARA',
    'LRN': 'KWARA',
    'MUN': 'KWARA',
    'WSN': 'KWARA',
    'KMA': 'KWARA',
    'BDU': 'KWARA',
    'FFA': 'KWARA',
    'LFF': 'KWARA',
    'LEM': 'KWARA',
    'PTG': 'KWARA',
    'GGE': 'LAGOS',
    'AGL': 'LAGOS',
    'KTU': 'LAGOS',
    'FST': 'LAGOS',
    'APP': 'LAGOS',
    'BDG': 'LAGOS',
    'EPE': 'LAGOS',
    'EKY': 'LAGOS',
    'AKD': 'LAGOS',
    'FKJ': 'LAGOS',
    'KJA': 'LAGOS',
    'KRD': 'LAGOS',
    'KSF': 'LAGOS',
    'AAA': 'LAGOS',
    'LND': 'LAGOS',
    'MUS': 'LAGOS',
    'JJJ': 'LAGOS',
    'LSD': 'LAGOS',
    'SMK': 'LAGOS',
    'LSR': 'LAGOS',
    'AKW': 'NASARAWA',
    'AWE': 'NASARAWA',
    'DMA': 'NASARAWA',
    'KRV': 'NASARAWA',
    'KEN': 'NASARAWA',
    'KEF': 'NASARAWA',
    'GRU': 'NASARAWA',
    'LFA': 'NASARAWA',
    'NSW': 'NASARAWA',
    'NEG': 'NASARAWA',
    'NBB': 'NASARAWA',
    'WAM': 'NASARAWA',
    'NTT': 'NASARAWA',
    'AGA': 'NIGER',
    'AGR': 'NIGER',
    'BDA': 'NIGER',
    'NBS': 'NIGER',
    'MAK': 'NIGER',
    'MNA': 'NIGER',
    'ENG': 'NIGER',
    'LMU': 'NIGER',
    'GWU': 'NIGER',
    'KHA': 'NIGER',
    'KNT': 'NIGER',
    'LAP': 'NIGER',
    'KUG': 'NIGER',
    'NAS': 'NIGER',
    'BMG': 'NIGER',
    'MSG': 'NIGER',
    'MKW': 'NIGER',
    'SRP': 'NIGER',
    'PAK': 'NIGER',
    'KAG': 'NIGER',
    'RJA': 'NIGER',
    'KUT': 'NIGER',
    'SUL': 'NIGER',
    'WSE': 'NIGER',
    'WSU': 'NIGER',
    'AKM': 'OGUN',
    'AAB': 'OGUN',
    'OTA': 'OGUN',
    'TRE': 'OGUN',
    'FFF': 'OGUN',
    'AYE': 'OGUN',
    'LAR': 'OGUN',
    'GBE': 'OGUN',
    'JGB': 'OGUN',
    'JNE': 'OGUN',
    'JBD': 'OGUN',
    'KNN': 'OGUN',
    'MEK': 'OGUN',
    'PKA': 'OGUN',
    'WDE': 'OGUN',
    'DED': 'OGUN',
    'DGB': 'OGUN',
    'ABG': 'OGUN',
    'JRM': 'OGUN',
    'SMG': 'OGUN',
    'KAK': 'ONDO',
    'ANG': 'ONDO',
    'SUA': 'ONDO',
    'KAA': 'ONDO',
    'AKR': 'ONDO',
    'JTA': 'ONDO',
    'GKB': 'ONDO',
    'WEN': 'ONDO',
    'FGB': 'ONDO',
    'GBA': 'ONDO',
    'LEL': 'ONDO',
    'REL': 'ONDO',
    'REE': 'ONDO',
    'KTP': 'ONDO',
    'NND': 'ONDO',
    'BDR': 'ONDO',
    'FFN': 'ONDO',
    'WWW': 'ONDO',
    'SSU': 'OSUN',
    'PRN': 'OSUN',
    'GBN': 'OSUN',
    'LGB': 'OSUN',
    'TAN': 'OSUN',
    'RGB': 'OSUN',
    'EDE': 'OSUN',
    'EDT': 'OSUN',
    'AAW': 'OSUN',
    'EJG': 'OSUN',
    'PMD': 'OSUN',
    'FTD': 'OSUN',
    'FFE': 'OSUN',
    'FEE': 'OSUN',
    'FDY': 'OSUN',
    'KNR': 'OSUN',
    'LRG': 'OSUN',
    'LES': 'OSUN',
    'LEW': 'OSUN',
    'RLG': 'OSUN',
    'KRE': 'OSUN',
    'APM': 'OSUN',
    'WWD': 'OSUN',
    'BKN': 'OSUN',
    'DTN': 'OSUN',
    'BDS': 'OSUN',
    'GNN': 'OSUN',
    'JJS': 'OSUN',
    'FNN': 'OSUN',
    'SGB': 'OSUN',
    'JBL': 'OYO',
    'MNY': 'OYO',
    'FMT': 'OYO',
    'TDE': 'OYO',
    'EGB': 'OYO',
    'BDJ': 'OYO',
    'AGG': 'OYO',
    'MRK': 'OYO',
    'MAP': 'OYO',
    'LUY': 'OYO',
    'RUW': 'OYO',
    'AYT': 'OYO',
    'IRP': 'OYO',
    'DDA': 'OYO',
    'KSH': 'OYO',
    'SEY': 'OYO',
    'TUT': 'OYO',
    'WEL': 'OYO',
    'KEH': 'OYO',
    'YNF': 'OYO',
    'KNH': 'OYO',
    'AME': 'OYO',
    'AJW': 'OYO',
    'GBY': 'OYO',
    'YRE': 'OYO',
    'AKN': 'OYO',
    'GBH': 'OYO',
    'KKY': 'OYO',
    'JND': 'OYO',
    'YYY': 'OYO',
    'GMD': 'OYO',
    'SHK': 'OYO',
    'RSD': 'OYO',
    'BLD': 'PLATEAU',
    'BSA': 'PLATEAU',
    'BKK': 'PLATEAU',
    'ANW': 'PLATEAU',
    'JJN': 'PLATEAU',
    'BUU': 'PLATEAU',
    'DNG': 'PLATEAU',
    'KWK': 'PLATEAU',
    'LGT': 'PLATEAU',
    'MBD': 'PLATEAU',
    'MGU': 'PLATEAU',
    'TNK': 'PLATEAU',
    'PKN': 'PLATEAU',
    'QAP': 'PLATEAU',
    'RYM': 'PLATEAU',
    'SHD': 'PLATEAU',
    'WAS': 'PLATEAU',
    'ABU': 'RIVERS',
    'AHD': 'RIVERS',
    'KNM': 'RIVERS',
    'ABM': 'RIVERS',
    'NDN': 'RIVERS',
    'BGM': 'RIVERS',
    'BNY': 'RIVERS',
    'DEG': 'RIVERS',
    'NCH': 'RIVERS',
    'MHA': 'RIVERS',
    'KHE': 'RIVERS',
    'KPR': 'RIVERS',
    'SKP': 'RIVERS',
    'BRR': 'RIVERS',
    'RUM': 'RIVERS',
    'RGM': 'RIVERS',
    'GGU': 'RIVERS',
    'KRK': 'RIVERS',
    'BER': 'RIVERS',
    'PBT': 'RIVERS',
    'AFM': 'RIVERS',
    'PHC': 'RIVERS',
    'SKN': 'RIVERS',
    'BJN': 'SOKOTO',
    'DBN': 'SOKOTO',
    'DGS': 'SOKOTO',
    'GAD': 'SOKOTO',
    'GRY': 'SOKOTO',
    'BLE': 'SOKOTO',
    'GWD': 'SOKOTO',
    'LLA': 'SOKOTO',
    'SAA': 'SOKOTO',
    'KBE': 'SOKOTO',
    'KWR': 'SOKOTO',
    'RBA': 'SOKOTO',
    'SBN': 'SOKOTO',
    'SGR': 'SOKOTO',
    'SLM': 'SOKOTO',
    'SKK': 'SOKOTO',
    'SRZ': 'SOKOTO',
    'TBW': 'SOKOTO',
    'TGZ': 'SOKOTO',
    'TRT': 'SOKOTO',
    'WMK': 'SOKOTO',
    'WRN': 'SOKOTO',
    'YYB': 'SOKOTO',
    'ARD': 'TARABA',
    'BAL': 'TARABA',
    'DGA': 'TARABA',
    'GKA': 'TARABA',
    'GAS': 'TARABA',
    'BBB': 'TARABA',
    'JAL': 'TARABA',
    'KLD': 'TARABA',
    'KRM': 'TARABA',
    'LAU': 'TARABA',
    'SDA': 'TARABA',
    'TTM': 'TARABA',
    'USS': 'TARABA',
    'WKR': 'TARABA',
    'YRR': 'TARABA',
    'TZG': 'TARABA',
    'GSH': 'YOBE',
    'DPH': 'YOBE',
    'DTR': 'YOBE',
    'FKA': 'YOBE',
    'FUN': 'YOBE',
    'GDM': 'YOBE',
    'GJB': 'YOBE',
    'GLN': 'YOBE',
    'JAK': 'YOBE',
    'KRS': 'YOBE',
    'MCN': 'YOBE',
    'NNR': 'YOBE',
    'NGU': 'YOBE',
    'PKM': 'YOBE',
    'TMW': 'YOBE',
    'YUN': 'YOBE',
    'YSF': 'YOBE',
    'ANK': 'ZAMFARA',
    'BKA': 'ZAMFARA',
    'BKM': 'ZAMFARA',
    'BUG': 'ZAMFARA',
    'GMM': 'ZAMFARA',
    'GUS': 'ZAMFARA',
    'KRN': 'ZAMFARA',
    'BMJ': 'ZAMFARA',
    'MRD': 'ZAMFARA',
    'MRR': 'ZAMFARA',
    'SKF': 'ZAMFARA',
    'TMA': 'ZAMFARA',
    'TSF': 'ZAMFARA',
    'ZRM': 'ZAMFARA',



}

# Creating a Pydantic model for input validation
class PlateNumberInput(BaseModel):
    plateNumber: str

# Function to get the state from lgacode
def get_state_from_lgacode(lgacode):
    return lgacode_to_state.get(lgacode, 'Nill')

# Endpoint for plate number categorization
@app.post("/predict_category/")
async def predict_category(input_data: PlateNumberInput):
    plate_number = input_data.plateNumber
    plate_vector = loaded_vectorizer.transform([plate_number])
    category_encoded = loaded_nb_classifier.predict(plate_vector)[0]
    category = loaded_label_encoder.inverse_transform([category_encoded])[0]

    # Extract the lgacode from the plate number
    lgacode = plate_number[:3]

    # Get the state corresponding to the lgacode
    state = get_state_from_lgacode(lgacode)

    return {
        "plateNumber": plate_number,
        "category": category,
        "lgacode": lgacode,
        "state": state
    }
